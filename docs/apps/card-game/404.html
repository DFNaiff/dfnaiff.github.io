<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>Redirecting...</title>
  <script>
    // Extract query parameters from URL
    const queryParams = {};
    window.location.search.substring(1).split('&').forEach(pair => {
      if (pair === '') return;
      const parts = pair.split('=');
      queryParams[decodeURIComponent(parts[0])] = decodeURIComponent(parts[1] || '');
    });

    // If gameId exists in URL, save it to sessionStorage
    if (queryParams.gameId) {
      sessionStorage.setItem('gameId', queryParams.gameId);
    }

    // Get the current path and redirect to the root with preserved path
    const segmentCount = window.location.pathname.split('/').length;
    const basePath = window.location.pathname.split('/').slice(0, -1).join('/');
    const redirectUrl = window.location.origin + basePath;
    
    console.log('Redirecting to:', redirectUrl);
    window.location.replace(redirectUrl);
  </script>
</head>
<body>
  <p>Redirecting to the game...</p>
</body>
</html>
